<div class="flex flex-col flex-auto min-w-0">
    <!-- Loader -->
    <div
        class="flex flex-col inset-x-0 bottom-0"
        *ngIf="isLoading">
        <mat-progress-bar [mode]="'indeterminate'"></mat-progress-bar>
    </div>
    <!-- Header -->
    <div class="dark bg-card dark:border-b">
        <div class="flex flex-col w-full max-w-screen-xl mx-auto px-6 sm:px-8">
            <div class="flex flex-col sm:flex-row flex-auto sm:items-center min-w-0 my-8 sm:my-16">
                <!-- Avatar and name -->
                <div class="flex flex-auto items-center min-w-0">
                    <div class="flex-0 w-16 h-16 rounded-full overflow-hidden">
                        <img
                            class="w-full h-full object-cover"
                            src="assets/images/logo/logo.png">
                    </div>
                    <div class="flex flex-col min-w-0 ml-4">
                        <div class="text-2xl md:text-3xl font-semibold tracking-tight leading-7 md:leading-snug truncate">환영합니다. {{userName}}님.</div>
                        <div class="text-2xl md:text-2xl font-semibold tracking-tight leading-7 md:leading-snug truncate">메디로 정보 포털입니다.</div>
                        <div class="flex items-center">
                            <mat-icon
                                class="icon-size-5"
                                [svgIcon]="'heroicons_solid:bell'"></mat-icon>
                            <div class="ml-1.5 leading-6 truncate text-secondary">10개의 새로운 소식이 있습니다.</div>
                        </div>
                    </div>
                </div>
                <!-- Actions -->
                <div class="flex items-center mt-6 sm:mt-0 sm:ml-2 space-x-3">
                    <button
                        class="fuse-mat-button-rounded"
                        mat-flat-button
                        (click)="movePage()"
                        [color]="'primary'">
                        <mat-icon
                            class="icon-size-5"
                            [svgIcon]="'heroicons_solid:cog'"></mat-icon>
                        <span class="ml-2">마이페이지</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- Main -->
    <div class="flex-auto mt-4 mx-4 sm:mt-6 sm:mx-6">

        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-5 gap-6 w-full min-w-0">
            <!-- 견적 -->
            <div class="flex flex-col sm:col-span-1 flex-auto p-6 bg-card shadow rounded-2xl cursor-pointer overflow-hidden" (click)="goPage('QT')">
                <div class="flex items-start justify-between">
                    <div class="text-lg font-medium tracking-tight leading-6 truncate">견적</div>
                </div>
                <div class="flex flex-col items-center mt-2">
                    <div class="text-7xl sm:text-8xl font-bold tracking-tight leading-none text-blue-300">
                        <div>{{qtInfo.nCnt}}</div>
                    </div>
                    <div class="text-lg font-medium text-blue-300 dark:text-blue-500">작성</div>
                    <div class="grid grid-cols-4 border-t divide-x -m-6 mt-6 bg-gray-50 dark:bg-transparent" [ngStyle]="{'width':'130%'}" >
                        <div class="flex flex-col col-span-1 items-center justify-center p-1">
                            <div class="text-xl font-semibold leading-none tracking-tighter">
                                {{qtInfo.rCnt}}
                            </div>
                            <div class="text-sm mt-1 text-center text-secondary">회신</div>
                        </div>
                        <div class="flex flex-col col-span-1 items-center justify-center p-1">
                            <div class="text-xl font-semibold leading-none tracking-tighter">
                                {{qtInfo.cfCnt}}
                            </div>
                            <div class="text-sm mt-1 text-center text-secondary">확정</div>
                        </div>
                        <div class="flex flex-col col-span-1 items-center justify-center p-1">
                            <div class="text-xl font-semibold leading-none tracking-tighter">
                                {{qtInfo.sCnt}}
                            </div>
                            <div class="text-sm mt-1 text-center text-secondary">발송</div>
                        </div>
                        <div class="flex flex-col col-span-1 items-center justify-center p-1">
                            <div class="text-xl font-semibold leading-none tracking-tighter">
                                {{qtInfo.cCnt}}
                            </div>
                            <div class="text-sm mt-1 text-center text-secondary">취소</div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 발주 -->
            <div class="flex flex-col sm:col-span-1 flex-auto p-6 bg-card shadow rounded-2xl cursor-pointer overflow-hidden" (click)="goPage('PO')">
                <div class="flex items-start justify-between">
                    <div class="text-lg font-medium tracking-tight leading-6 truncate">발주</div>
                </div>
                <div class="flex flex-col items-center mt-2">
                    <div class="text-7xl sm:text-8xl font-bold tracking-tight leading-none text-blue-500">
                        {{poInfo.nCnt}}
                    </div>
                    <div class="text-lg font-medium text-blue-600 dark:text-blue-500">발주</div>
                    <div class="grid grid-cols-3 border-t divide-x -m-6 mt-6 bg-gray-50 dark:bg-transparent" [ngStyle]="{'width':'130%'}" >
                        <div class="flex flex-col col-span-1 items-center justify-center p-1">
                            <div class="text-xl font-semibold leading-none tracking-tighter">
                                {{poInfo.pCnt}}
                            </div>
                            <div class="text-sm mt-1 text-center text-secondary">발주진행</div>
                        </div>
                        <div class="flex flex-col col-span-1 items-center justify-center p-1">
                            <div class="text-xl font-semibold leading-none tracking-tighter">
                                {{poInfo.psCnt}}
                            </div>
                            <div class="text-sm mt-1 text-center text-secondary">부분발주</div>
                        </div>
                        <div class="flex flex-col col-span-1 items-center justify-center p-1">
                            <div class="text-xl font-semibold leading-none tracking-tighter">
                                {{poInfo.sCnt}}
                            </div>
                            <div class="text-sm mt-1 text-center text-secondary">발주완료</div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 주문 -->
            <div class="flex flex-col sm:col-span-1 flex-auto p-6 bg-card shadow rounded-2xl cursor-pointer overflow-hidden" (click)="goPage('SO')">
                <div class="flex items-start justify-between">
                    <div class="text-lg font-medium tracking-tight leading-6 truncate">주문</div>
                </div>
                <div class="flex flex-col items-center mt-2">
                    <div class="text-7xl sm:text-8xl font-bold tracking-tight leading-none text-red-500">
                        {{soInfo.nCnt}}
                    </div>
                    <div class="text-lg font-medium text-red-600 dark:text-red-500">주문</div>
                    <div class="grid grid-cols-2 border-t divide-x -m-6 mt-6 bg-gray-50 dark:bg-transparent" [ngStyle]="{'width':'130%'}" >
                        <div class="flex flex-col col-span-1 items-center justify-center p-1">
                            <div class="text-xl font-semibold leading-none tracking-tighter">
                                {{soInfo.sCnt}}
                            </div>
                            <div class="text-sm mt-1 text-center text-secondary">주문확정</div>
                        </div>
                        <div class="flex flex-col col-span-1 items-center justify-center p-1">
                            <div class="text-xl font-semibold leading-none tracking-tighter">
                                {{soInfo.cCnt}}
                            </div>
                            <div class="text-sm mt-1 text-center text-secondary">주문취소</div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 입고 -->
            <div class="flex flex-col sm:col-span-1 flex-auto p-6 bg-card shadow rounded-2xl cursor-pointer overflow-hidden" (click)="goPage('IB')">
                <div class="flex items-start justify-between">
                    <div class="text-lg font-medium tracking-tight leading-6 truncate">입고</div>
                </div>
                <div class="flex flex-col items-center mt-2">
                    <div class="text-7xl sm:text-8xl font-bold tracking-tight leading-none text-amber-500">
                        {{ibInfo.nCnt}}
                    </div>
                    <div class="text-lg font-medium text-amber-600 dark:text-amber-500">신규</div>
                    <div class="grid grid-cols-4 border-t divide-x -m-6 mt-6 bg-gray-50 dark:bg-transparent" [ngStyle]="{'width':'130%'}" >
                        <div class="flex flex-col col-span-1 items-center justify-center p-1">
                            <div class="text-xl font-semibold leading-none tracking-tighter">
                                {{ibInfo.pCnt}}
                            </div>
                            <div class="text-sm mt-1 text-center text-secondary">부분입고</div>
                        </div>
                        <div class="flex flex-col col-span-1 items-center justify-center p-1">
                            <div class="text-xl font-semibold leading-none tracking-tighter">
                                {{ibInfo.sCnt}}
                            </div>
                            <div class="text-sm mt-1 text-center text-secondary">입고</div>
                        </div>
                        <div class="flex flex-col col-span-1 items-center justify-center p-1">
                            <div class="text-xl font-semibold leading-none tracking-tighter">
                                {{ibInfo.fCnt}}
                            </div>
                            <div class="text-sm mt-1 text-center text-secondary">마감</div>
                        </div>
                        <div class="flex flex-col col-span-1 items-center justify-center p-1">
                            <div class="text-xl font-semibold leading-none tracking-tighter">
                                {{ibInfo.cCnt}}
                            </div>
                            <div class="text-sm mt-1 text-center text-secondary">취소</div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 출고 -->
            <div class="flex flex-col sm:col-span-1 flex-auto p-6 bg-card shadow rounded-2xl cursor-pointer overflow-hidden" (click)="goPage('OB')">
                <div class="flex items-start justify-between">
                    <div class="text-lg font-medium tracking-tight leading-6 truncate">출고</div>
                </div>
                <div class="flex flex-col items-center mt-2">
                    <div class="text-7xl sm:text-8xl font-bold tracking-tight leading-none text-green-500">
                        {{obInfo.nCnt}}
                    </div>
                    <div class="text-lg font-medium text-green-600 dark:text-green-500">신규</div>
                    <div class="grid grid-cols-4 border-t divide-x -m-6 mt-6 bg-gray-50 dark:bg-transparent" [ngStyle]="{'width':'130%'}" >
                        <div class="flex flex-col col-span-1 items-center justify-center p-1">
                            <div class="text-xl font-semibold leading-none tracking-tighter">
                                {{obInfo.pCnt}}
                            </div>
                            <div class="text-sm mt-1 text-center text-secondary">부분출고</div>
                        </div>
                        <div class="flex flex-col col-span-1 items-center justify-center p-1">
                            <div class="text-xl font-semibold leading-none tracking-tighter">
                                {{obInfo.sCnt}}
                            </div>
                            <div class="text-sm mt-1 text-center text-secondary">출고</div>
                        </div>
                        <div class="flex flex-col col-span-1 items-center justify-center p-1">
                            <div class="text-xl font-semibold leading-none tracking-tighter">
                                {{obInfo.dCnt}}
                            </div>
                            <div class="text-sm mt-1 text-center text-secondary">명세서</div>
                        </div>
                        <div class="flex flex-col col-span-1 items-center justify-center p-1">
                            <div class="text-xl font-semibold leading-none tracking-tighter">
                                {{obInfo.cCnt}}
                            </div>
                            <div class="text-sm mt-1 text-center text-secondary">취소</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- UDI 신고 현황 -->
            <div class="sm:col-span-2 md:col-span-5 flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden">
                <div class="flex flex-col sm:flex-row items-start justify-between">
                    <div class="text-lg font-medium tracking-tight leading-6 truncate">UDI 공급내역 현황</div>
                    <div class="mt-3 sm:mt-0 sm:ml-2">
                        <mat-button-toggle-group
                            value="this-week"
                            #udiInfoWeekSelector="matButtonToggleGroup">
                            <mat-button-toggle value="last-week">지난 주</mat-button-toggle>
                            <mat-button-toggle value="this-week">이번 주</mat-button-toggle>
                        </mat-button-toggle-group>
                    </div>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-2 grid-flow-row gap-6 w-full mt-8 sm:mt-4">
                    <!-- New vs. Closed -->
                    <div class="flex flex-col flex-auto">
                        <div class="font-medium text-secondary">성공 vs. 실패</div>
                        <div class="flex flex-col flex-auto">
                            <apx-chart
                                class="flex-auto w-full h-80"
                                [chart]="chartUdiInfo.chart"
                                [colors]="chartUdiInfo.colors"
                                [dataLabels]="chartUdiInfo.dataLabels"
                                [grid]="chartUdiInfo.grid"
                                [labels]="chartUdiInfo.labels"
                                [legend]="chartUdiInfo.legend"
                                [plotOptions]="chartUdiInfo.plotOptions"
                                [series]="chartUdiInfo.series[udiInfoWeekSelector.value]"
                                [states]="chartUdiInfo.states"
                                [stroke]="chartUdiInfo.stroke"
                                [tooltip]="chartUdiInfo.tooltip"
                                [xaxis]="chartUdiInfo.xaxis"
                                [yaxis]="chartUdiInfo.yaxis"></apx-chart>
                        </div>
                    </div>
                    <!-- Overview -->
                    <div class="flex flex-col">
                        <div class="font-medium text-secondary">보고상태</div>
                        <div class="flex-auto grid grid-cols-4 gap-4 mt-6">
                            <!-- 성공 -->
                            <div class="col-span-2 flex flex-col items-center justify-center py-8 px-1 rounded-2xl bg-indigo-50 text-indigo-800 dark:bg-white dark:bg-opacity-5 dark:text-indigo-400">
                                <div class="text-5xl sm:text-7xl font-semibold leading-none tracking-tight">
                                    {{udiInfos.overview[udiInfoWeekSelector.value]['성공']}}
                                </div>
                                <div class="mt-1 text-sm sm:text-lg font-medium">성공</div>
                            </div>
                            <!-- 에러 -->
                            <div class="col-span-2 flex flex-col items-center justify-center py-8 px-1 rounded-2xl bg-green-50 text-green-800 dark:bg-white dark:bg-opacity-5 dark:text-green-500">
                                <div class="text-5xl sm:text-7xl font-semibold leading-none tracking-tight">
                                    {{udiInfos.overview[udiInfoWeekSelector.value]['에러']}}
                                </div>
                                <div class="mt-1 text-sm sm:text-lg font-medium">에러</div>
                            </div>
                            <!-- 대기 -->
                            <div class="col-span-2 flex flex-col items-center justify-center py-8 px-1 rounded-2xl bg-gray-100 text-secondary dark:bg-white dark:bg-opacity-5">
                                <div class="text-5xl sm:text-7xl font-semibold leading-none tracking-tight">
                                    {{udiInfos.overview[udiInfoWeekSelector.value]['대기']}}
                                </div>
                                <div class="mt-1 text-sm sm:text-lg font-medium">대기</div>
                            </div>
                            <!-- 요청중 -->
                            <div class="col-span-2 flex flex-col items-center justify-center py-8 px-1 rounded-2xl bg-gray-100 text-secondary dark:bg-white dark:bg-opacity-5">
                                <div class="text-5xl sm:text-7xl font-semibold leading-none tracking-tight">
                                    {{udiInfos.overview[udiInfoWeekSelector.value]['요청중']}}
                                </div>
                                <div class="mt-1 text-sm sm:text-lg font-medium">요청중</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="sm:col-span-5 flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden">
                <div class="flex flex-col sm:flex-row items-start justify-between">
                    <div class="text-lg font-medium tracking-tight leading-6 truncate"></div>
                    <div class="mt-3 sm:mt-0 sm:ml-2">
                        <mat-button-toggle-group
                            value="recall-item"
                            #taskSelector="matButtonToggleGroup">
                            <!-- <mat-button-toggle value="news">의료기기 News</mat-button-toggle> -->
                            <mat-button-toggle value="recall-item">회수대상 의료기기</mat-button-toggle>
                        </mat-button-toggle-group>
                    </div>
                </div>
                <div *ngIf="taskSelector.value == 'recall-item'" class="flex flex-col flex-auto">
                    <div class="flex flex-col flex-auto mt-2 overflow-x-auto">
                        <ng-container *ngIf="reacllItemsCount > 0; else noItems">
                            <table
                                class="min-w-240 overflow-y-visible"
                                mat-table
                                [dataSource]="racallTaleData.rows">
                                <ng-container matColumnDef="imgPath" sticky>
                                    <th
                                        mat-header-cell
                                        *matHeaderCellDef
                                        width ="10%">
                                        이미지
                                    </th>
                                    <td
                                        mat-cell
                                        *matCellDef="let img">
                                        <img
                                            class="w-12"
                                            *ngIf="img.imgPath"
                                            [src]="img.imgPath">
                                        <span
                                            class="flex items-center justify-center w-full h-full text-xs font-semibold leading-none text-center uppercase"
                                            *ngIf="!img.imgPath">
                                            No Image
                                        </span>
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="itemName">
                                    <th
                                        mat-header-cell
                                        *matHeaderCellDef
                                        width ="20%">
                                        상품명
                                    </th>
                                    <td
                                        mat-cell
                                        *matCellDef="let item">
                                                <span class="font-medium text-right">
                                                   {{item.itemName}}
                                                </span>
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="companyName">
                                    <th
                                        mat-header-cell
                                        *matHeaderCellDef
                                        width ="25%">
                                        회사
                                    </th>
                                    <td
                                        mat-cell
                                        *matCellDef="let company">
                                                <span class="font-medium text-right">
                                                  {{company.companyName}}
                                                </span>
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="recallReason">
                                    <th
                                        mat-header-cell
                                        *matHeaderCellDef
                                        width ="40%">
                                        회수이유
                                    </th>
                                    <td
                                        mat-cell
                                        *matCellDef="let reason">
                                        <!--                                <div class="flex items-center w-full mt-1">-->
                                        <!--                                    <span class="leading-4 truncate">{{reason.recallReason}}</span>-->
                                        <!--                                </div>-->
                                        <span class="font-medium text-right text-overflow">
                                                   {{reason.recallReason}}
                                                </span>
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="path">
                                    <th
                                        mat-header-cell
                                        *matHeaderCellDef
                                        width ="5%">
                                        상세
                                    </th>
                                    <td
                                        mat-cell
                                        *matCellDef="let detail">
                                        <a
                                            href={{detail.path}}
                                            rel="noreferrer"
                                            target="_blank">
                                            <mat-icon
                                                class="icon-size-5 text-secondary"
                                                [svgIcon]="'mat_outline:airplay'"></mat-icon>
                                        </a>
                                    </td>
                                </ng-container>
                                <tr
                                    mat-header-row
                                    *matHeaderRowDef="racallTaleData.columns"></tr>
                                <tr
                                    mat-row
                                    *matRowDef="let row; columns: racallTaleData.columns;"></tr>
                            </table>
                        </ng-container>
                    </div>
                    <mat-paginator
                        class="sm:relative sm:inset-x-0 sm:bottom-0 border-b sm:border-t sm:border-b-0 z-10 dark:bg-transparent"
                        [ngClass]="{'pointer-events-none': isLoading}"
                        [length]="pagination.length"
                        [pageIndex]="pagination.page"
                        [pageSize]="pagination.size"
                        [pageSizeOptions]="[8]"
                        [showFirstLastButtons]="true"></mat-paginator>
                    <ng-template #noItems>
                        <div class="p-8 sm:p-16 border-t text-2xl font-semibold tracking-tight text-center">
                            <p>네트워크가 불안합니다.</p>
                            <p>잠시후 다시 실행해 주세요.</p>
                        </div>
                    </ng-template>
                </div>
                <div *ngIf="taskSelector.value == 'news'" class="flex flex-col flex-auto mt-6">
                    뉴스정보
                </div>
            </div>
            <br>
        </div>

    </div>

</div>
